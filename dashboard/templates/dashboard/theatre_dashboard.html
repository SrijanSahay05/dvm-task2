{% extends 'dashboard/base.html' %}

{% block content %}
<div class="container mt-4">
    <h2 class="mb-4">{{ theatre_name }} Dashboard</h2>
    
    <!-- Dashboard Summary -->
    <div class="row mb-4">
        <div class="col-md-4">
            <div class="card text-white bg-primary mb-3">
                <div class="card-body">
                    <h5 class="card-title">Total Scheduled Shows</h5>
                    <p class="card-text">{{ shows|length }}</p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-white bg-success mb-3">
                <div class="card-body">
                    <h5 class="card-title">Total Screens</h5>
                    <p class="card-text">{{ num_of_screens }}</p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-white bg-warning mb-3">
                <div class="card-body">
                    <h5 class="card-title">Revenue Generated</h5>
                    <p class="card-text">$10,500</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Movie Management Section -->
    <div class="card mb-4">
        <div class="card-header bg-dark text-white">Movies</div>
        <div class="card-body">
            <a class="btn btn-success mb-3" href="#">Add Movie</a>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Title</th>
                        <th>Genre</th>
                        <th>Release Date</th>
                        <th>Director</th>
                        <th>Duration</th>
                        <th>Rating</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for movie in movies %}
                    <tr>
                        <td>{{ movie.title }}</td>
                        <td>{{ movie.genre }}</td>
                        <td>{{ movie.release_date|date:"d M, Y" }}</td>
                        <td>{{ movie.director }}</td>
                        <td>{{ movie.duration }} mins</td>
                        <td>{{ movie.rating }}</td>
                
                        <td>
                            <a href="#" class="btn btn-sm btn-primary">Edit</a>
                            <a href="#" class="btn btn-sm btn-danger" onclick="return confirm('Are you sure you want to delete this screen?');">Delete</a>
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="4" class="text-center">No screens available.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <!-- Screen Management Section -->
    <div class="card mb-4">
        <div class="card-header bg-dark text-white">Manage Screens</div>
        <div class="card-body">
            <a class="btn btn-success mb-3" href="{% url 'add-screen' %}">Add Screen</a>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Screen Name</th>
                        <th>Total Seats</th>
                        <th>Available Seats</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for screen in screens %}
                    <tr>
                        <td>{{ screen.screen_name }}</td>
                        <td>{{ screen.total_seats }}</td>
                        <td>{{ screen.available_seats }}</td>
                        <td>
                            <a href="{% url 'edit_screen' screen.id %}" class="btn btn-sm btn-primary">Edit</a>
                            <a href="{% url 'delete_screen' screen.id %}" class="btn btn-sm btn-danger" onclick="return confirm('Are you sure you want to delete this screen?');">Delete</a>
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="4" class="text-center">No screens available.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <!-- Show Management Section -->
    <div class="card mb-4">
        <div class="card-header bg-dark text-white">Manage Shows</div>
        <div class="card-body">
            <a class="btn btn-success mb-3" href="{% url 'add-show' %}">Add Show</a>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Show Name</th>
                        <th>Screen</th>
                        <th>Movie</th>
                        <th>Show Time</th>
                        <th>Price</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for show in shows %}
                    <tr>
                        <td>{{ show.movie.title }} - {{ show.show_time|date:"M d, Y H:i" }}</td>
                        <td>{{ show.screen.screen_name }}</td>
                        <td>{{ show.movie.title }}</td>
                        <td>{{ show.show_time|date:"M d, Y H:i" }}</td>
                        <td>${{ show.price }}</td>
                        <td>
                            <a href="{% url 'edit_show' show.id %}" class="btn btn-sm btn-primary">Edit</a>
                            <a href="{% url 'delete_show' show.id %}" class="btn btn-sm btn-danger" onclick="return confirm('Are you sure you want to delete this screen?');">Delete</a>
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="6" class="text-center">No shows available.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <!-- Other sections of the dashboard remain the same -->
</div>
{% endblock %}
